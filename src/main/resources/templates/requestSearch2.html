<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title>Request Search Results</title>-->
<!--    <style>-->
<!--        body {-->
<!--            font-family: Arial, sans-serif;-->
<!--            background-color: #f8f9fa;-->
<!--            margin: 20px;-->
<!--            padding: 20px;-->
<!--            text-align: center;-->
<!--        }-->

<!--        h1 {-->
<!--            color: #333;-->
<!--            margin-bottom: 20px;-->
<!--        }-->

<!--        .table-container {-->
<!--            width: 100%;-->
<!--            max-width: 1200px;-->
<!--            margin: 0 auto;-->
<!--            background: white;-->
<!--            padding: 15px;-->
<!--            border-radius: 8px;-->
<!--            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);-->
<!--            overflow-x: auto;-->
<!--        }-->

<!--        table {-->
<!--            width: 100%;-->
<!--            border-collapse: collapse;-->
<!--            margin-top: 10px;-->
<!--        }-->

<!--        th, td {-->
<!--            border: 1px solid #ddd;-->
<!--            padding: 10px;-->
<!--            text-align: left;-->
<!--        }-->

<!--        th {-->
<!--            background-color: #007bff;-->
<!--            color: white;-->
<!--            font-weight: bold;-->
<!--            text-transform: uppercase;-->
<!--        }-->

<!--        tr:nth-child(even) {-->
<!--            background-color: #f9f9f9;-->
<!--        }-->

<!--        tr:hover {-->
<!--            background-color: #f1f1f1;-->
<!--            transition: background 0.3s ease;-->
<!--        }-->

<!--        @media (max-width: 768px) {-->
<!--            body {-->
<!--                margin: 10px;-->
<!--                padding: 10px;-->
<!--            }-->

<!--            .table-container {-->
<!--                width: 100%;-->
<!--                padding: 10px;-->
<!--            }-->

<!--            table {-->
<!--                font-size: 14px;-->
<!--            }-->

<!--            th, td {-->
<!--                padding: 8px;-->
<!--            }-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->

<!--<h1>Request Search Results</h1>-->

<!--<div class="table-container">-->
<!--    <table id="requestTable">-->
<!--        <thead>-->
<!--        <tr>-->
<!--            <th>Request ID</th>-->
<!--            <th>Start Date</th>-->
<!--            <th>End Date</th>-->
<!--            <th>Address</th>-->
<!--            <th>Task ID</th>-->
<!--            <th>Resource</th>-->
<!--            <th>Status</th>-->
<!--            <th>Last Status Change</th>-->
<!--        </tr>-->
<!--        </thead>-->
<!--        <tbody>-->
<!--        &lt;!&ndash; Dynamic rows will be inserted here &ndash;&gt;-->
<!--        </tbody>-->
<!--    </table>-->
<!--</div>-->

<!--<script>-->
<!--    // Fetch JSON data from the endpoint-->
<!--    async function fetchRequests() {-->
<!--        try {-->
<!--            const response = await fetch('http://localhost:8080/requests/search'); // Adjust the URL if needed-->
<!--            if (!response.ok) {-->
<!--                throw new Error(`HTTP error! Status: ${response.status}`);-->
<!--            }-->
<!--            const data = await response.json();-->
<!--            populateTable(data);-->
<!--        } catch (error) {-->
<!--            console.error('Error fetching data:', error);-->
<!--        }-->
<!--    }-->

<!--    // Populate the table with the fetched data-->
<!--    function populateTable(data) {-->
<!--        const tableBody = document.querySelector('#requestTable tbody');-->
<!--        tableBody.innerHTML = ''; // Clear previous data-->

<!--        data.forEach(request => {-->
<!--            const requestRow = document.createElement('tr');-->
<!--            requestRow.innerHTML = `-->
<!--                <td>${request.id}</td>-->
<!--                <td>${formatDate(request.startDate)}</td>-->
<!--                <td>${formatDate(request.endDate)}</td>-->
<!--                <td>${request.address}</td>-->
<!--                <td></td>-->
<!--                <td></td>-->
<!--                <td></td>-->
<!--                <td></td>-->
<!--            `;-->
<!--            tableBody.appendChild(requestRow);-->

<!--            request.tasks.forEach(task => {-->
<!--                const taskRow = document.createElement('tr');-->
<!--                taskRow.innerHTML = `-->
<!--                    <td></td>-->
<!--                    <td></td>-->
<!--                    <td></td>-->
<!--                    <td></td>-->
<!--                    <td>${task.id}</td>-->
<!--                    <td>${task.resource}</td>-->
<!--                    <td></td>-->
<!--                    <td></td>-->
<!--                `;-->
<!--                tableBody.appendChild(taskRow);-->

<!--                task.days.forEach(day => {-->
<!--                    const dayRow = document.createElement('tr');-->
<!--                    dayRow.innerHTML = `-->
<!--                        <td></td>-->
<!--                        <td></td>-->
<!--                        <td></td>-->
<!--                        <td></td>-->
<!--                        <td></td>-->
<!--                        <td></td>-->
<!--                        <td>${day.status}</td>-->
<!--                        <td>${formatDate(day.time)}</td>-->
<!--                    `;-->
<!--                    tableBody.appendChild(dayRow);-->
<!--                });-->
<!--            });-->
<!--        });-->
<!--    }-->

<!--    // Format date for better readability-->
<!--    function formatDate(dateString) {-->
<!--        if (!dateString) return 'Not set';-->
<!--        const date = new Date(dateString);-->
<!--        return date.toLocaleDateString() + ' ' + date.toLocaleTimeString();-->
<!--    }-->

<!--    // Fetch and populate data when the page loads-->
<!--    document.addEventListener('DOMContentLoaded', fetchRequests);-->
<!--</script>-->

<!--</body>-->
<!--</html>-->


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Request Search Results</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f8f9fa;
            margin: 20px;
            padding: 20px;
            text-align: center;
        }

        h1 {
            color: #333;
            margin-bottom: 20px;
        }

        .table-container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
        }

        th {
            background-color: #007bff;
            color: white;
            font-weight: bold;
            text-transform: uppercase;
        }

        tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        tr:hover {
            background-color: #f1f1f1;
            transition: background 0.3s ease;
        }

        @media (max-width: 768px) {
            body {
                margin: 10px;
                padding: 10px;
            }

            .table-container {
                width: 100%;
                padding: 10px;
            }

            table {
                font-size: 14px;
            }

            th, td {
                padding: 8px;
            }
        }
    </style>
</head>
<body>

<h1>Request Search Results</h1>

<div class="table-container">
    <table id="requestTable">
        <thead>
        <tr>
            <th>Request ID</th>
            <th>Start Date</th>
            <th>End Date</th>
            <th>Address</th>
            <th>Task ID</th>
            <th>Resource</th>
            <th>Status</th>
            <th>Last Status Change</th>
        </tr>
        </thead>
        <tbody>
        <!-- Dynamic rows will be inserted here -->
        </tbody>
    </table>
</div>

<script>
    // Fetch JSON data from the endpoint
    async function fetchRequests() {
        try {
            const response = await fetch('http://localhost:8080/requests/search'); // Adjust the URL if needed
            if (!response.ok) {
                throw new Error(`HTTP error! Status: ${response.status}`);
            }
            const data = await response.json();
            populateTable(data);
        } catch (error) {
            console.error('Error fetching data:', error);
        }
    }

// Populate the table with the fetched data
function populateTable(data) {
const tableBody = document.querySelector('#requestTable tbody');
tableBody.innerHTML = ''; // Clear previous data

data.forEach(request => {
const requestRow = document.createElement('tr');
requestRow.innerHTML = `
<td>${request.id}</td>
<td>${formatDate(request.startDate)}</td>
<td>${formatDate(request.endDate)}</td>
<td>${request.address}</td>
<td></td>
<td></td>
<td></td>
<td></td>
`;
tableBody.appendChild(requestRow);

request.tasks.forEach(task => {
const taskRow = document.createElement('tr');
taskRow.innerHTML = `
<td></td>
<td></td>
<td></td>
<td></td>
<td>${task.id}</td>
<td>${task.resource ? task.resource : 'No resource'}</td>
<td></td>
<td></td>
`;
tableBody.appendChild(taskRow);

task.days.forEach(day => {
const dayRow = document.createElement('tr');
dayRow.innerHTML = `
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>${day.status}</td>
<td>${formatDate(day.time)}</td>
`;
tableBody.appendChild(dayRow);
});
});
});
}

// Format date for better readability
function formatDate(dateString) {
if (!dateString) return 'Not set';
const date = new Date(dateString);
return date.toLocaleDateString() + ' ' + date.toLocaleTimeString();
}


        // Fetch and populate data when the page loads
        document.addEventListener('DOMContentLoaded', fetchRequests);
    </script>

</body>
</html>